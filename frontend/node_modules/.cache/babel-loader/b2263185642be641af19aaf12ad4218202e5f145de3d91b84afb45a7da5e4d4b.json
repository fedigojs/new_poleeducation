{"ast":null,"code":"var _jsxFileName = \"/Users/igorfedianin/MyProject/poleeducation.in.ua/frontend/src/pages/HomePage/TimingHomePage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport api from '../../api/api';\nimport './ContentHomePage.css';\nimport './TimingHomePage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TimingHomePage = () => {\n  _s();\n  const [participants, setParticipants] = useState([]);\n  const [competitions, setCompetitions] = useState([]);\n  const [tabTrends, setTabTrends] = useState([]);\n  const [allParticipants, setAllParticipants] = useState([]);\n  const [trendOrder, setTrendOrder] = useState([]);\n  const [selectedCompetition, setSelectedCompetition] = useState('');\n  const [activeTrend, setActiveTrend] = useState('');\n  useEffect(() => {\n    fetchData();\n  }, []);\n  useEffect(() => {\n    if (selectedCompetition) {\n      fetchDataTabs();\n    }\n  }, [selectedCompetition]);\n  const fetchProtocolStatuses = async participant => {\n    const {\n      athleteId,\n      competitionParticipationId\n    } = participant;\n    if (!athleteId || !competitionParticipationId) {\n      console.error('Missing athleteId or competitionParticipationId');\n      return [];\n    }\n    try {\n      const response = await api.get(`/api/protocol-result/athlete/${athleteId}/participation/${competitionParticipationId}`);\n      if (response.data && response.data.length > 0) {\n        const uniqueProtocolResults = Array.from(new Set(response.data.map(result => result.protocolTypeId))).map(protocolTypeId => {\n          return response.data.find(result => result.protocolTypeId === protocolTypeId);\n        });\n        return uniqueProtocolResults.map(result => ({\n          protocolTypeId: result.protocolTypeId,\n          isFilled: result.isFilled\n        }));\n      } else {\n        return [];\n      }\n    } catch (error) {\n      if (error.response && error.response.status === 404) {\n        return [];\n      } else {\n        console.error('Error fetching protocol statuses:', error);\n        return [];\n      }\n    }\n  };\n  const fetchData = async () => {\n    try {\n      const responseDraw = await api.get('/api/draw-result');\n      const sortedData = responseDraw.data.sort((a, b) => a.performanceOrder - b.performanceOrder);\n      const updatedParticipants = await Promise.all(sortedData.map(async participant => {\n        const protocolStatuses = await fetchProtocolStatuses({\n          athleteId: participant.participation.athleteId,\n          competitionParticipationId: participant.competitionParticipationId\n        });\n        const totalScore = await calculateTotalScore(participant.participation.athleteId, participant.participation.id);\n        return {\n          ...participant,\n          protocolStatuses,\n          totalScore\n        };\n      }));\n      setAllParticipants(updatedParticipants); // Сохраняем всех участников, отсортированных\n      setParticipants(updatedParticipants); // Обновляем текущее состояние участников\n\n      const responseCompetition = await api.get('/api/competition');\n      setCompetitions(responseCompetition.data);\n\n      // Извлекаем уникальные направления\n      const uniqueTrends = new Set();\n      responseDraw.data.forEach(item => {\n        if (item.participation && item.participation.AthleteTrend && item.participation.AthleteTrend.trends) {\n          const trendName = item.participation.AthleteTrend.trends.split('(')[0].trim(); // Отсекаем по скобке и обрезаем пробелы\n          uniqueTrends.add(trendName);\n        }\n      });\n      setTabTrends(Array.from(uniqueTrends)); // Преобразуем Set в массив и сохраняем в состояние\n    } catch (error) {\n      console.error('Ошибка при получении данных:', error);\n    }\n  };\n  const fetchDataTabs = async () => {\n    if (!selectedCompetition) {\n      console.error('Соревнование не выбрано');\n      return;\n    }\n    try {\n      const responseParticipants = await api.get(`/api/comp-part/trends/${selectedCompetition}`);\n      const uniqueTrends = new Set();\n      responseParticipants.data.forEach(item => {\n        const trendName = item.AthleteTrend.trends.split('(')[0].trim(); // Отсекаем по скобке и обрезаем пробелы\n        uniqueTrends.add(trendName);\n      });\n      setTabTrends(Array.from(uniqueTrends));\n    } catch (error) {\n      console.error('Ошибка при получении данных о направлениях:', error);\n    }\n  };\n  const handleDraw = async () => {\n    if (!selectedCompetition) {\n      alert('Пожалуйста, выберите соревнование.');\n      return;\n    }\n    try {\n      const newDrawResponse = await api.post(`/api/draw-result/draw/${selectedCompetition}`);\n      if (newDrawResponse.data && newDrawResponse.data.drawResults) {\n        const participants = newDrawResponse.data.drawResults.map(result => ({\n          ...result,\n          participation: result.participation\n        }));\n        const sortedParticipants = participants.sort((a, b) => a.performanceOrder - b.performanceOrder);\n        setAllParticipants(sortedParticipants); // Обновляем всех участников\n        setParticipants(sortedParticipants); // Обновляем текущих участников\n\n        const trends = Array.from(new Set(participants.map(item => {\n          var _item$participation, _item$participation$A;\n          return (_item$participation = item.participation) === null || _item$participation === void 0 ? void 0 : (_item$participation$A = _item$participation.AthleteTrend) === null || _item$participation$A === void 0 ? void 0 : _item$participation$A.trends.split('(')[0].trim();\n        })));\n        setTabTrends(trends); // Обновляем направления без скобок\n      } else {\n        console.error('Expected participants data is not available');\n      }\n    } catch (error) {\n      console.error('Ошибка при проведении жеребьёвки:', error);\n    }\n  };\n\n  // Функция для изменения порядка направлений\n  const handleTrendOrderChange = (trend, position) => {\n    let orderCopy = [...trendOrder];\n    orderCopy = orderCopy.filter(item => item.trend !== trend); // Убираем текущее направление, если оно уже есть\n    orderCopy.push({\n      trend,\n      position: parseInt(position)\n    }); // Добавляем направление с новой позицией\n    orderCopy.sort((a, b) => a.position - b.position); // Сортируем по позиции\n    setTrendOrder(orderCopy);\n    filterParticipantsByTrendOrder(orderCopy); // Фильтрация участников по новому порядку\n  };\n\n  // Функция для фильтрации и сортировки участников по выбранному порядку направлений\n  const filterParticipantsByTrendOrder = order => {\n    const orderedTrends = order.map(item => item.trend);\n    const filteredParticipants = allParticipants.filter(participant => {\n      var _participant$particip, _participant$particip2;\n      return orderedTrends.includes((_participant$particip = participant.participation) === null || _participant$particip === void 0 ? void 0 : (_participant$particip2 = _participant$particip.AthleteTrend) === null || _participant$particip2 === void 0 ? void 0 : _participant$particip2.trends.split('(')[0].trim());\n    }).sort((a, b) => {\n      const trendA = a.participation.AthleteTrend.trends.split('(')[0].trim();\n      const trendB = b.participation.AthleteTrend.trends.split('(')[0].trim();\n      const positionA = orderedTrends.indexOf(trendA);\n      const positionB = orderedTrends.indexOf(trendB);\n      return positionA - positionB;\n    });\n    setParticipants(filteredParticipants);\n  };\n  const handleTabClick = selectedTrend => {\n    setActiveTrend(selectedTrend);\n    // Фильтрация участников по направлению\n    const filteredParticipants = allParticipants.filter(participant => participant.participation && participant.participation.AthleteTrend && participant.participation.AthleteTrend.trends.startsWith(selectedTrend));\n    // Сортировка отфильтрованных участников\n    const sortedFilteredParticipants = filteredParticipants.sort((a, b) => a.performanceOrder - b.performanceOrder);\n    setParticipants(sortedFilteredParticipants); // Обновляем список участников жеребьёвки для отображения\n  };\n  const resetFilter = () => {\n    setActiveTrend(''); // Сброс активного направления\n    setParticipants(allParticipants); // Восстановление списка всех участников\n  };\n  const calculateTotalScore = async (athleteId, competitionParticipationId) => {\n    try {\n      const [protocolData, exerciseData] = await Promise.all([fetchProtocolDetails(athleteId, competitionParticipationId), fetchExerciseProtocolDetails(competitionParticipationId)]);\n      const protocolScores = protocolData.reduce((acc, detail) => {\n        var _detail$detail;\n        const protocolTypeId = (_detail$detail = detail.detail) === null || _detail$detail === void 0 ? void 0 : _detail$detail.protocolTypeId;\n        if (!acc[protocolTypeId]) {\n          acc[protocolTypeId] = {\n            score: 0,\n            judges: new Set()\n          };\n        }\n        acc[protocolTypeId].score += detail.score;\n        acc[protocolTypeId].judges.add(detail.judgeId);\n        return acc;\n      }, {});\n      const averageScores = Object.values(protocolScores).map(({\n        score,\n        judges\n      }) => score / judges.size);\n      const exerciseScores = exerciseData.filter(item => item.result === 1).length;\n      const totalAverageScore = averageScores.reduce((sum, avg) => sum + avg, 0) + exerciseScores;\n      console.log('Вычисленный общий балл:', totalAverageScore);\n      return totalAverageScore;\n    } catch (error) {\n      console.error('Ошибка при расчете общего балла:', error);\n      return 0;\n    }\n  };\n  const fetchProtocolDetails = async (athleteId, competitionParticipationId) => {\n    try {\n      const response = await api.get(`/api/protocol-result/athlete/${athleteId}/participation/${competitionParticipationId}`);\n      return response.data;\n    } catch (error) {\n      console.error('Ошибка при получении данных протокола:', error);\n      return [];\n    }\n  };\n  const fetchExerciseProtocolDetails = async competitionParticipationId => {\n    try {\n      const response = await api.get(`/api/protocol-exercise-result/participation/${competitionParticipationId}`);\n      return response.data.exercises || [];\n    } catch (error) {\n      console.error('Ошибка при получении данных протокола упражнений:', error);\n      return [];\n    }\n  };\n  const updateParticipantTotalScore = async (participantId, totalScore) => {\n    try {\n      await api.put(`/api/draw-result/update-total-score/${participantId}`, {\n        totalScore\n      });\n      setParticipants(prevParticipants => prevParticipants.map(participant => participant.participation.id === participantId ? {\n        ...participant,\n        totalScore\n      } : participant));\n    } catch (error) {\n      console.error('Ошибка при обновлении общего балла:', error);\n    }\n  };\n  const dayColors = ['#F0F8FF',\n  // Alice Blue\n  '#FAEBD7',\n  // Antique White\n  '#F5F5DC',\n  // Beige\n  '#FFEFD5',\n  // Papaya Whip\n  '#FFF5EE',\n  // SeaShell\n  '#F5F5F5' // White Smoke\n  ];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tabs\",\n      children: [tabTrends.map((trend, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-link ${trend === activeTrend ? 'active' : ''}`,\n        onClick: () => handleTabClick(trend),\n        children: trend\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 6\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"tab-link reset-button\",\n        onClick: resetFilter,\n        children: \"\\u0421\\u043A\\u0438\\u043D\\u0443\\u0442\\u0438 \\u0444\\u0456\\u043B\\u044C\\u0442\\u0440\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tab-content-container2\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-container\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u2116\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0406\\u043C`\\u044F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0420\\u043E\\u0437\\u0440\\u044F\\u0434\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0412\\u0456\\u043A\\u043E\\u0432\\u0430 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u044F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0417\\u0430\\u0433. \\u0431\\u0430\\u043B\\u043B\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 368,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: participants.map((participant, index) => {\n              var _participant$particip3, _participant$particip4, _participant$particip5;\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                style: {\n                  backgroundColor: dayColors[(participant.competitionDay - 1) % dayColors.length]\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: participant.performanceOrder\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 383,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: `${(_participant$particip3 = participant.participation.Athlete) === null || _participant$particip3 === void 0 ? void 0 : _participant$particip3.firstName} ${(_participant$particip4 = participant.participation.Athlete) === null || _participant$particip4 === void 0 ? void 0 : _participant$particip4.lastName}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: (_participant$particip5 = participant.participation.Level) === null || _participant$particip5 === void 0 ? void 0 : _participant$particip5.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: participant.participation.AthleteAge.age\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 389,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"cc\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 10\n                }, this)]\n              }, participant.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 9\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 340,\n    columnNumber: 3\n  }, this);\n};\n_s(TimingHomePage, \"T7dwyTjwiISITKLvL+nTrAsz9wI=\");\n_c = TimingHomePage;\nexport default TimingHomePage;\nvar _c;\n$RefreshReg$(_c, \"TimingHomePage\");","map":{"version":3,"names":["React","useState","useEffect","api","jsxDEV","_jsxDEV","TimingHomePage","_s","participants","setParticipants","competitions","setCompetitions","tabTrends","setTabTrends","allParticipants","setAllParticipants","trendOrder","setTrendOrder","selectedCompetition","setSelectedCompetition","activeTrend","setActiveTrend","fetchData","fetchDataTabs","fetchProtocolStatuses","participant","athleteId","competitionParticipationId","console","error","response","get","data","length","uniqueProtocolResults","Array","from","Set","map","result","protocolTypeId","find","isFilled","status","responseDraw","sortedData","sort","a","b","performanceOrder","updatedParticipants","Promise","all","protocolStatuses","participation","totalScore","calculateTotalScore","id","responseCompetition","uniqueTrends","forEach","item","AthleteTrend","trends","trendName","split","trim","add","responseParticipants","handleDraw","alert","newDrawResponse","post","drawResults","sortedParticipants","_item$participation","_item$participation$A","handleTrendOrderChange","trend","position","orderCopy","filter","push","parseInt","filterParticipantsByTrendOrder","order","orderedTrends","filteredParticipants","_participant$particip","_participant$particip2","includes","trendA","trendB","positionA","indexOf","positionB","handleTabClick","selectedTrend","startsWith","sortedFilteredParticipants","resetFilter","protocolData","exerciseData","fetchProtocolDetails","fetchExerciseProtocolDetails","protocolScores","reduce","acc","detail","_detail$detail","score","judges","judgeId","averageScores","Object","values","size","exerciseScores","totalAverageScore","sum","avg","log","exercises","updateParticipantTotalScore","participantId","put","prevParticipants","dayColors","children","className","index","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_participant$particip3","_participant$particip4","_participant$particip5","style","backgroundColor","competitionDay","Athlete","firstName","lastName","Level","name","AthleteAge","age","_c","$RefreshReg$"],"sources":["/Users/igorfedianin/MyProject/poleeducation.in.ua/frontend/src/pages/HomePage/TimingHomePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport api from '../../api/api';\nimport './ContentHomePage.css';\nimport './TimingHomePage.css';\n\nconst TimingHomePage = () => {\n\tconst [participants, setParticipants] = useState([]);\n\tconst [competitions, setCompetitions] = useState([]);\n\tconst [tabTrends, setTabTrends] = useState([]);\n\tconst [allParticipants, setAllParticipants] = useState([]);\n\tconst [trendOrder, setTrendOrder] = useState([]);\n\tconst [selectedCompetition, setSelectedCompetition] = useState('');\n\tconst [activeTrend, setActiveTrend] = useState('');\n\n\tuseEffect(() => {\n\t\tfetchData();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (selectedCompetition) {\n\t\t\tfetchDataTabs();\n\t\t}\n\t}, [selectedCompetition]);\n\n\tconst fetchProtocolStatuses = async (participant) => {\n\t\tconst { athleteId, competitionParticipationId } = participant;\n\n\t\tif (!athleteId || !competitionParticipationId) {\n\t\t\tconsole.error('Missing athleteId or competitionParticipationId');\n\t\t\treturn [];\n\t\t}\n\n\t\ttry {\n\t\t\tconst response = await api.get(\n\t\t\t\t`/api/protocol-result/athlete/${athleteId}/participation/${competitionParticipationId}`\n\t\t\t);\n\n\t\t\tif (response.data && response.data.length > 0) {\n\t\t\t\tconst uniqueProtocolResults = Array.from(\n\t\t\t\t\tnew Set(\n\t\t\t\t\t\tresponse.data.map((result) => result.protocolTypeId)\n\t\t\t\t\t)\n\t\t\t\t).map((protocolTypeId) => {\n\t\t\t\t\treturn response.data.find(\n\t\t\t\t\t\t(result) => result.protocolTypeId === protocolTypeId\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\t\treturn uniqueProtocolResults.map((result) => ({\n\t\t\t\t\tprotocolTypeId: result.protocolTypeId,\n\t\t\t\t\tisFilled: result.isFilled,\n\t\t\t\t}));\n\t\t\t} else {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tif (error.response && error.response.status === 404) {\n\t\t\t\treturn [];\n\t\t\t} else {\n\t\t\t\tconsole.error('Error fetching protocol statuses:', error);\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\t};\n\n\tconst fetchData = async () => {\n\t\ttry {\n\t\t\tconst responseDraw = await api.get('/api/draw-result');\n\t\t\tconst sortedData = responseDraw.data.sort(\n\t\t\t\t(a, b) => a.performanceOrder - b.performanceOrder\n\t\t\t);\n\n\t\t\tconst updatedParticipants = await Promise.all(\n\t\t\t\tsortedData.map(async (participant) => {\n\t\t\t\t\tconst protocolStatuses = await fetchProtocolStatuses({\n\t\t\t\t\t\tathleteId: participant.participation.athleteId,\n\t\t\t\t\t\tcompetitionParticipationId:\n\t\t\t\t\t\t\tparticipant.competitionParticipationId,\n\t\t\t\t\t});\n\t\t\t\t\tconst totalScore = await calculateTotalScore(\n\t\t\t\t\t\tparticipant.participation.athleteId,\n\t\t\t\t\t\tparticipant.participation.id\n\t\t\t\t\t);\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...participant,\n\t\t\t\t\t\tprotocolStatuses,\n\t\t\t\t\t\ttotalScore,\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tsetAllParticipants(updatedParticipants); // Сохраняем всех участников, отсортированных\n\t\t\tsetParticipants(updatedParticipants); // Обновляем текущее состояние участников\n\n\t\t\tconst responseCompetition = await api.get('/api/competition');\n\t\t\tsetCompetitions(responseCompetition.data);\n\n\t\t\t// Извлекаем уникальные направления\n\t\t\tconst uniqueTrends = new Set();\n\t\t\tresponseDraw.data.forEach((item) => {\n\t\t\t\tif (\n\t\t\t\t\titem.participation &&\n\t\t\t\t\titem.participation.AthleteTrend &&\n\t\t\t\t\titem.participation.AthleteTrend.trends\n\t\t\t\t) {\n\t\t\t\t\tconst trendName = item.participation.AthleteTrend.trends\n\t\t\t\t\t\t.split('(')[0]\n\t\t\t\t\t\t.trim(); // Отсекаем по скобке и обрезаем пробелы\n\t\t\t\t\tuniqueTrends.add(trendName);\n\t\t\t\t}\n\t\t\t});\n\t\t\tsetTabTrends(Array.from(uniqueTrends)); // Преобразуем Set в массив и сохраняем в состояние\n\t\t} catch (error) {\n\t\t\tconsole.error('Ошибка при получении данных:', error);\n\t\t}\n\t};\n\n\tconst fetchDataTabs = async () => {\n\t\tif (!selectedCompetition) {\n\t\t\tconsole.error('Соревнование не выбрано');\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst responseParticipants = await api.get(\n\t\t\t\t`/api/comp-part/trends/${selectedCompetition}`\n\t\t\t);\n\t\t\tconst uniqueTrends = new Set();\n\t\t\tresponseParticipants.data.forEach((item) => {\n\t\t\t\tconst trendName = item.AthleteTrend.trends.split('(')[0].trim(); // Отсекаем по скобке и обрезаем пробелы\n\t\t\t\tuniqueTrends.add(trendName);\n\t\t\t});\n\t\t\tsetTabTrends(Array.from(uniqueTrends));\n\t\t} catch (error) {\n\t\t\tconsole.error('Ошибка при получении данных о направлениях:', error);\n\t\t}\n\t};\n\n\tconst handleDraw = async () => {\n\t\tif (!selectedCompetition) {\n\t\t\talert('Пожалуйста, выберите соревнование.');\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst newDrawResponse = await api.post(\n\t\t\t\t`/api/draw-result/draw/${selectedCompetition}`\n\t\t\t);\n\n\t\t\tif (newDrawResponse.data && newDrawResponse.data.drawResults) {\n\t\t\t\tconst participants = newDrawResponse.data.drawResults.map(\n\t\t\t\t\t(result) => ({\n\t\t\t\t\t\t...result,\n\t\t\t\t\t\tparticipation: result.participation,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tconst sortedParticipants = participants.sort(\n\t\t\t\t\t(a, b) => a.performanceOrder - b.performanceOrder\n\t\t\t\t);\n\n\t\t\t\tsetAllParticipants(sortedParticipants); // Обновляем всех участников\n\t\t\t\tsetParticipants(sortedParticipants); // Обновляем текущих участников\n\n\t\t\t\tconst trends = Array.from(\n\t\t\t\t\tnew Set(\n\t\t\t\t\t\tparticipants.map((item) =>\n\t\t\t\t\t\t\titem.participation?.AthleteTrend?.trends\n\t\t\t\t\t\t\t\t.split('(')[0]\n\t\t\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\tsetTabTrends(trends); // Обновляем направления без скобок\n\t\t\t} else {\n\t\t\t\tconsole.error('Expected participants data is not available');\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Ошибка при проведении жеребьёвки:', error);\n\t\t}\n\t};\n\n\t// Функция для изменения порядка направлений\n\tconst handleTrendOrderChange = (trend, position) => {\n\t\tlet orderCopy = [...trendOrder];\n\t\torderCopy = orderCopy.filter((item) => item.trend !== trend); // Убираем текущее направление, если оно уже есть\n\t\torderCopy.push({ trend, position: parseInt(position) }); // Добавляем направление с новой позицией\n\t\torderCopy.sort((a, b) => a.position - b.position); // Сортируем по позиции\n\t\tsetTrendOrder(orderCopy);\n\t\tfilterParticipantsByTrendOrder(orderCopy); // Фильтрация участников по новому порядку\n\t};\n\n\t// Функция для фильтрации и сортировки участников по выбранному порядку направлений\n\tconst filterParticipantsByTrendOrder = (order) => {\n\t\tconst orderedTrends = order.map((item) => item.trend);\n\t\tconst filteredParticipants = allParticipants\n\t\t\t.filter((participant) =>\n\t\t\t\torderedTrends.includes(\n\t\t\t\t\tparticipant.participation?.AthleteTrend?.trends\n\t\t\t\t\t\t.split('(')[0]\n\t\t\t\t\t\t.trim()\n\t\t\t\t)\n\t\t\t)\n\t\t\t.sort((a, b) => {\n\t\t\t\tconst trendA = a.participation.AthleteTrend.trends\n\t\t\t\t\t.split('(')[0]\n\t\t\t\t\t.trim();\n\t\t\t\tconst trendB = b.participation.AthleteTrend.trends\n\t\t\t\t\t.split('(')[0]\n\t\t\t\t\t.trim();\n\t\t\t\tconst positionA = orderedTrends.indexOf(trendA);\n\t\t\t\tconst positionB = orderedTrends.indexOf(trendB);\n\t\t\t\treturn positionA - positionB;\n\t\t\t});\n\t\tsetParticipants(filteredParticipants);\n\t};\n\n\tconst handleTabClick = (selectedTrend) => {\n\t\tsetActiveTrend(selectedTrend);\n\t\t// Фильтрация участников по направлению\n\t\tconst filteredParticipants = allParticipants.filter(\n\t\t\t(participant) =>\n\t\t\t\tparticipant.participation &&\n\t\t\t\tparticipant.participation.AthleteTrend &&\n\t\t\t\tparticipant.participation.AthleteTrend.trends.startsWith(\n\t\t\t\t\tselectedTrend\n\t\t\t\t)\n\t\t);\n\t\t// Сортировка отфильтрованных участников\n\t\tconst sortedFilteredParticipants = filteredParticipants.sort(\n\t\t\t(a, b) => a.performanceOrder - b.performanceOrder\n\t\t);\n\t\tsetParticipants(sortedFilteredParticipants); // Обновляем список участников жеребьёвки для отображения\n\t};\n\n\tconst resetFilter = () => {\n\t\tsetActiveTrend(''); // Сброс активного направления\n\t\tsetParticipants(allParticipants); // Восстановление списка всех участников\n\t};\n\n\tconst calculateTotalScore = async (\n\t\tathleteId,\n\t\tcompetitionParticipationId\n\t) => {\n\t\ttry {\n\t\t\tconst [protocolData, exerciseData] = await Promise.all([\n\t\t\t\tfetchProtocolDetails(athleteId, competitionParticipationId),\n\t\t\t\tfetchExerciseProtocolDetails(competitionParticipationId),\n\t\t\t]);\n\n\t\t\tconst protocolScores = protocolData.reduce((acc, detail) => {\n\t\t\t\tconst protocolTypeId = detail.detail?.protocolTypeId;\n\t\t\t\tif (!acc[protocolTypeId]) {\n\t\t\t\t\tacc[protocolTypeId] = { score: 0, judges: new Set() };\n\t\t\t\t}\n\t\t\t\tacc[protocolTypeId].score += detail.score;\n\t\t\t\tacc[protocolTypeId].judges.add(detail.judgeId);\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\n\t\t\tconst averageScores = Object.values(protocolScores).map(\n\t\t\t\t({ score, judges }) => score / judges.size\n\t\t\t);\n\n\t\t\tconst exerciseScores = exerciseData.filter(\n\t\t\t\t(item) => item.result === 1\n\t\t\t).length;\n\n\t\t\tconst totalAverageScore =\n\t\t\t\taverageScores.reduce((sum, avg) => sum + avg, 0) +\n\t\t\t\texerciseScores;\n\n\t\t\tconsole.log('Вычисленный общий балл:', totalAverageScore);\n\t\t\treturn totalAverageScore;\n\t\t} catch (error) {\n\t\t\tconsole.error('Ошибка при расчете общего балла:', error);\n\t\t\treturn 0;\n\t\t}\n\t};\n\n\tconst fetchProtocolDetails = async (\n\t\tathleteId,\n\t\tcompetitionParticipationId\n\t) => {\n\t\ttry {\n\t\t\tconst response = await api.get(\n\t\t\t\t`/api/protocol-result/athlete/${athleteId}/participation/${competitionParticipationId}`\n\t\t\t);\n\t\t\treturn response.data;\n\t\t} catch (error) {\n\t\t\tconsole.error('Ошибка при получении данных протокола:', error);\n\t\t\treturn [];\n\t\t}\n\t};\n\n\tconst fetchExerciseProtocolDetails = async (competitionParticipationId) => {\n\t\ttry {\n\t\t\tconst response = await api.get(\n\t\t\t\t`/api/protocol-exercise-result/participation/${competitionParticipationId}`\n\t\t\t);\n\t\t\treturn response.data.exercises || [];\n\t\t} catch (error) {\n\t\t\tconsole.error(\n\t\t\t\t'Ошибка при получении данных протокола упражнений:',\n\t\t\t\terror\n\t\t\t);\n\t\t\treturn [];\n\t\t}\n\t};\n\n\tconst updateParticipantTotalScore = async (participantId, totalScore) => {\n\t\ttry {\n\t\t\tawait api.put(\n\t\t\t\t`/api/draw-result/update-total-score/${participantId}`,\n\t\t\t\t{\n\t\t\t\t\ttotalScore,\n\t\t\t\t}\n\t\t\t);\n\t\t\tsetParticipants((prevParticipants) =>\n\t\t\t\tprevParticipants.map((participant) =>\n\t\t\t\t\tparticipant.participation.id === participantId\n\t\t\t\t\t\t? { ...participant, totalScore }\n\t\t\t\t\t\t: participant\n\t\t\t\t)\n\t\t\t);\n\t\t} catch (error) {\n\t\t\tconsole.error('Ошибка при обновлении общего балла:', error);\n\t\t}\n\t};\n\n\tconst dayColors = [\n\t\t'#F0F8FF', // Alice Blue\n\t\t'#FAEBD7', // Antique White\n\t\t'#F5F5DC', // Beige\n\t\t'#FFEFD5', // Papaya Whip\n\t\t'#FFF5EE', // SeaShell\n\t\t'#F5F5F5', // White Smoke\n\t];\n\n\treturn (\n\t\t<div>\n\t\t\t<div className='tabs'>\n\t\t\t\t{tabTrends.map((trend, index) => (\n\t\t\t\t\t<button\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tclassName={`tab-link ${\n\t\t\t\t\t\t\ttrend === activeTrend ? 'active' : ''\n\t\t\t\t\t\t}`}\n\t\t\t\t\t\tonClick={() => handleTabClick(trend)}>\n\t\t\t\t\t\t{trend}\n\t\t\t\t\t</button>\n\t\t\t\t))}\n\t\t\t\t<button\n\t\t\t\t\tclassName='tab-link reset-button'\n\t\t\t\t\tonClick={resetFilter}>\n\t\t\t\t\tСкинути фільтр\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div className='tab-content-container2'>\n\t\t\t\t<div className='table-container'>\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>№</th>\n\t\t\t\t\t\t\t\t<th>Ім`я</th>\n\t\t\t\t\t\t\t\t<th>Розряд</th>\n\t\t\t\t\t\t\t\t<th>Вікова категорія</th>\n\t\t\t\t\t\t\t\t<th>Заг. балл</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{participants.map((participant, index) => (\n\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\tkey={participant.id}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tbackgroundColor:\n\t\t\t\t\t\t\t\t\t\t\tdayColors[\n\t\t\t\t\t\t\t\t\t\t\t\t(participant.competitionDay -\n\t\t\t\t\t\t\t\t\t\t\t\t\t1) %\n\t\t\t\t\t\t\t\t\t\t\t\t\tdayColors.length\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t<td>{participant.performanceOrder}</td>\n\n\t\t\t\t\t\t\t\t\t<td>{`${participant.participation.Athlete?.firstName} ${participant.participation.Athlete?.lastName}`}</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t{participant.participation.Level?.name}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tparticipant.participation.AthleteAge\n\t\t\t\t\t\t\t\t\t\t\t\t.age\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t{/* {participant.totalScore}{' '} */}cc\n\t\t\t\t\t\t\t\t\t\t{/* Отображаем общую сумму баллов */}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default TimingHomePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}