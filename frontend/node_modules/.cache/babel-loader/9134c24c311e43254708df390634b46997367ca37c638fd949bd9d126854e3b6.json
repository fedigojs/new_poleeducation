{"ast":null,"code":"var _jsxFileName = \"/Users/igorfedianin/MyProject/poleeducation.in.ua/frontend/src/components/adminpanel/AthletesDraw.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport api from '../../api/api';\nimport ModalVotingDetails from '../ModalVotingDetails';\nimport ModalVoting from '../ModalVoting';\nimport './AthletesDraw.css';\nimport { AuthContext } from '../../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AthletesDraw = () => {\n  _s();\n  const [participants, setParticipants] = useState([]);\n  const [competitions, setCompetitions] = useState([]);\n  const [tabTrends, setTabTrends] = useState([]);\n  const [allParticipants, setAllParticipants] = useState([]);\n  const [trendOrder, setTrendOrder] = useState([]);\n  const [selectedCompetition, setSelectedCompetition] = useState('');\n  const [activeTrend, setActiveTrend] = useState('');\n  const [startTime, setStartTime] = useState('09:00');\n  const [performanceDuration, setPerformanceDuration] = useState(5); // в минутах\n  const [breakDuration, setBreakDuration] = useState(1); // в минутах\n  const [lunchBreakStart, setLunchBreakStart] = useState('12:00');\n  const [lunchBreakEnd, setLunchBreakEnd] = useState('13:00');\n  const [endTime, setEndTime] = useState('19:00'); // Например, соревнования заканчиваются в 18:00\n  const [isDetailsModalOpen, setIsDetailsModalOpen] = useState(false);\n  const [isVotingModalOpen, setIsVotingModalOpen] = useState(false);\n  const [selectedParticipant, setSelectedParticipant] = useState(null);\n  const {\n    user\n  } = useContext(AuthContext); // Получаем пользователя из контекста\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n  useEffect(() => {\n    if (selectedCompetition) {\n      fetchDataTabs();\n    }\n  }, [selectedCompetition]);\n  const openDetailsModal = participant => {\n    setSelectedParticipant(participant);\n    setIsDetailsModalOpen(true);\n  };\n  const closeDetailsModal = () => {\n    setIsDetailsModalOpen(false);\n  };\n  const openVotingModal = participant => {\n    setSelectedParticipant(participant);\n    setIsVotingModalOpen(true);\n  };\n  const closeVotingModal = () => {\n    setIsVotingModalOpen(false);\n  };\n  const fetchProtocolStatuses = async participant => {\n    const {\n      athleteId,\n      competitionParticipationId\n    } = participant;\n    if (!athleteId || !competitionParticipationId) {\n      console.error('Missing athleteId or competitionParticipationId');\n      return [];\n    }\n    try {\n      const response = await api.get(`/api/protocol-result/athlete/${athleteId}/participation/${competitionParticipationId}`);\n      if (response.data && response.data.length > 0) {\n        const uniqueProtocolResults = Array.from(new Set(response.data.map(result => result.protocolTypeId))).map(protocolTypeId => {\n          return response.data.find(result => result.protocolTypeId === protocolTypeId);\n        });\n        return uniqueProtocolResults.map(result => ({\n          protocolTypeId: result.protocolTypeId,\n          isFilled: result.isFilled\n        }));\n      } else {\n        return [];\n      }\n    } catch (error) {\n      if (error.response && error.response.status === 404) {\n        return [];\n      } else {\n        console.error('Error fetching protocol statuses:', error);\n        return [];\n      }\n    }\n  };\n  const fetchData = async () => {\n    try {\n      const responseDraw = await api.get('/api/draw-result');\n      const sortedData = responseDraw.data.sort((a, b) => a.performanceOrder - b.performanceOrder);\n      const updatedParticipants = await Promise.all(sortedData.map(async participant => {\n        const protocolStatuses = await fetchProtocolStatuses({\n          athleteId: participant.participation.athleteId,\n          competitionParticipationId: participant.competitionParticipationId\n        });\n        const totalScore = await calculateTotalScore(participant.participation.athleteId, participant.participation.id);\n        return {\n          ...participant,\n          protocolStatuses,\n          totalScore\n        };\n      }));\n      setAllParticipants(updatedParticipants); // Сохраняем всех участников, отсортированных\n      setParticipants(updatedParticipants); // Обновляем текущее состояние участников\n\n      const responseCompetition = await api.get('/api/competition');\n      setCompetitions(responseCompetition.data);\n\n      // Извлекаем уникальные направления\n      const uniqueTrends = new Set();\n      responseDraw.data.forEach(item => {\n        if (item.participation && item.participation.AthleteTrend && item.participation.AthleteTrend.trends) {\n          const trendName = item.participation.AthleteTrend.trends.split('(')[0].trim(); // Отсекаем по скобке и обрезаем пробелы\n          uniqueTrends.add(trendName);\n        }\n      });\n      setTabTrends(Array.from(uniqueTrends)); // Преобразуем Set в массив и сохраняем в состояние\n    } catch (error) {\n      console.error('Ошибка при получении данных:', error);\n    }\n  };\n  const fetchDataTabs = async () => {\n    if (!selectedCompetition) {\n      console.error('Соревнование не выбрано');\n      return;\n    }\n    try {\n      const responseParticipants = await api.get(`/api/comp-part/trends/${selectedCompetition}`);\n      const uniqueTrends = new Set();\n      responseParticipants.data.forEach(item => {\n        const trendName = item.AthleteTrend.trends.split('(')[0].trim(); // Отсекаем по скобке и обрезаем пробелы\n        uniqueTrends.add(trendName);\n      });\n      setTabTrends(Array.from(uniqueTrends));\n    } catch (error) {\n      console.error('Ошибка при получении данных о направлениях:', error);\n    }\n  };\n  const handleDraw = async () => {\n    if (!selectedCompetition) {\n      alert('Пожалуйста, выберите соревнование.');\n      return;\n    }\n    try {\n      const newDrawResponse = await api.post(`/api/draw-result/draw/${selectedCompetition}`);\n      if (newDrawResponse.data && newDrawResponse.data.drawResults) {\n        const participants = newDrawResponse.data.drawResults.map(result => ({\n          ...result,\n          participation: result.participation\n        }));\n        const sortedParticipants = participants.sort((a, b) => a.performanceOrder - b.performanceOrder);\n        setAllParticipants(sortedParticipants); // Обновляем всех участников\n        setParticipants(sortedParticipants); // Обновляем текущих участников\n\n        const trends = Array.from(new Set(participants.map(item => {\n          var _item$participation, _item$participation$A;\n          return (_item$participation = item.participation) === null || _item$participation === void 0 ? void 0 : (_item$participation$A = _item$participation.AthleteTrend) === null || _item$participation$A === void 0 ? void 0 : _item$participation$A.trends.split('(')[0].trim();\n        })));\n        setTabTrends(trends); // Обновляем направления без скобок\n      } else {\n        console.error('Expected participants data is not available');\n      }\n    } catch (error) {\n      console.error('Ошибка при проведении жеребьёвки:', error);\n    }\n  };\n\n  // Функция для изменения порядка направлений\n  const handleTrendOrderChange = (trend, position) => {\n    let orderCopy = [...trendOrder];\n    orderCopy = orderCopy.filter(item => item.trend !== trend); // Убираем текущее направление, если оно уже есть\n    orderCopy.push({\n      trend,\n      position: parseInt(position)\n    }); // Добавляем направление с новой позицией\n    orderCopy.sort((a, b) => a.position - b.position); // Сортируем по позиции\n    setTrendOrder(orderCopy);\n    filterParticipantsByTrendOrder(orderCopy); // Фильтрация участников по новому порядку\n  };\n\n  // Функция для фильтрации и сортировки участников по выбранному порядку направлений\n  const filterParticipantsByTrendOrder = order => {\n    const orderedTrends = order.map(item => item.trend);\n    const filteredParticipants = allParticipants.filter(participant => {\n      var _participant$particip, _participant$particip2;\n      return orderedTrends.includes((_participant$particip = participant.participation) === null || _participant$particip === void 0 ? void 0 : (_participant$particip2 = _participant$particip.AthleteTrend) === null || _participant$particip2 === void 0 ? void 0 : _participant$particip2.trends.split('(')[0].trim());\n    }).sort((a, b) => {\n      const trendA = a.participation.AthleteTrend.trends.split('(')[0].trim();\n      const trendB = b.participation.AthleteTrend.trends.split('(')[0].trim();\n      const positionA = orderedTrends.indexOf(trendA);\n      const positionB = orderedTrends.indexOf(trendB);\n      return positionA - positionB;\n    });\n    setParticipants(filteredParticipants);\n  };\n  const handleTabClick = selectedTrend => {\n    setActiveTrend(selectedTrend);\n    // Фильтрация участников по направлению\n    const filteredParticipants = allParticipants.filter(participant => participant.participation && participant.participation.AthleteTrend && participant.participation.AthleteTrend.trends.startsWith(selectedTrend));\n    // Сортировка отфильтрованных участников\n    const sortedFilteredParticipants = filteredParticipants.sort((a, b) => a.performanceOrder - b.performanceOrder);\n    setParticipants(sortedFilteredParticipants); // Обновляем список участников жеребьёвки для отображения\n  };\n  const resetFilter = () => {\n    setActiveTrend(''); // Сброс активного направления\n    setParticipants(allParticipants); // Восстановление списка всех участников\n  };\n  const calculateTiming = async () => {\n    if (!selectedCompetition) {\n      alert('Please select a competition before calculating timings.');\n      return;\n    }\n    let currentTime = new Date(`2024-01-01T${startTime}:00Z`);\n    const endTimeOfDay = new Date(`2024-01-01T${endTime}:00Z`);\n    const lunchStartTime = new Date(`2024-01-01T${lunchBreakStart}:00Z`);\n    const lunchEndTime = new Date(`2024-01-01T${lunchBreakEnd}:00Z`);\n    let currentDay = 1; // Начинаем с первого дня\n\n    const updatedParticipants = participants.map(participant => {\n      // Обработка обеденного перерыва\n      if (currentTime >= lunchStartTime && currentTime < lunchEndTime) {\n        currentTime = new Date(lunchEndTime);\n      }\n      // Обработка окончания дня\n      if (currentTime >= endTimeOfDay) {\n        currentTime = new Date(`2024-01-01T${startTime}:00Z`);\n        currentDay++; // Переход на следующий день\n      }\n      const timeStr = currentTime.toISOString().substring(11, 16);\n      const dayStr = currentDay; // Отображение текущего дня\n\n      currentTime = new Date(currentTime.getTime() + (performanceDuration + breakDuration) * 60000);\n      return {\n        ...participant,\n        timing: timeStr,\n        competitionDay: dayStr\n      };\n    });\n    setParticipants(updatedParticipants);\n    console.log('Calculated timings:', updatedParticipants);\n\n    // Обновление времени на сервере\n    try {\n      const response = await api.put(`/api/draw-result/update-timing/${selectedCompetition}`, updatedParticipants);\n      if (response.status === 200) {\n        console.log('Timings successfully updated:', response.data);\n        const transformedData = response.data.results.map(item => item[0]);\n        setParticipants(transformedData);\n      }\n    } catch (error) {\n      console.error('Error updating timings:', error);\n    }\n  };\n  const deleteAllDrawResultsForCompetition = async competitionId => {\n    try {\n      const response = await api.delete(`/api/draw-result/delete/${competitionId}`);\n      console.log(response.data.message); // Логирование сообщения об успешном удалении\n\n      // Обновление состояния для удаления всех результатов жеребьёвки данного соревнования\n      const updatedParticipants = allParticipants.filter(participant => participant.competitionId !== competitionId);\n      setParticipants(updatedParticipants);\n      setAllParticipants(updatedParticipants); // Обновляем состояние всех участников\n    } catch (error) {\n      console.error('Ошибка при удалении результатов жеребьёвки:', error);\n      alert('Не удалось удалить результаты жеребьёвки: ' + error.message);\n    }\n  };\n  const handleVoteSubmit = async e => {\n    e.preventDefault(); // Предотвращаем стандартное поведение формы\n\n    // Собираем данные из формы\n    const formData = {\n      athleteId: selectedParticipant.participation.Athlete.id,\n      score: e.target.score.value,\n      // Предполагаем, что у поля ввода оценки есть имя 'score'\n      comment: e.target.comment.value // Предполагаем, что у текстового поля комментария есть имя 'comment'\n    };\n    try {\n      // Отправляем данные на сервер\n      const response = await api.post('/api/voting', formData);\n      if (response.status === 200) {\n        console.log('Голос успешно зарегистрирован');\n        // Здесь можно добавить дальнейшие действия, например, закрыть модальное окно\n        closeVotingModal();\n      } else {\n        console.error('Ошибка при отправке данных', response);\n      }\n    } catch (error) {\n      console.error('Ошибка при отправке данных', error);\n    }\n  };\n  const handleUpdateScore = (participantId, newTotalScore) => {\n    setParticipants(prevParticipants => prevParticipants.map(participant => participant.id === participantId ? {\n      ...participant,\n      totalScore: newTotalScore\n    } : participant));\n  };\n  const handleUpdateAllScores = async () => {\n    try {\n      const updatedParticipants = await Promise.all(participants.map(async participant => {\n        const totalScore = await calculateTotalScore(participant.participation.athleteId, participant.participation.id);\n        await api.put(`/api/draw-result/update-total-score/${participant.id}`, {\n          totalScore\n        });\n        return {\n          ...participant,\n          totalScore\n        };\n      }));\n      setParticipants(updatedParticipants);\n    } catch (error) {\n      console.error('Ошибка при обновлении totalScore для всех участников:', error);\n    }\n  };\n  const calculateTotalScore = async (athleteId, competitionParticipationId) => {\n    try {\n      const [protocolData, exerciseData] = await Promise.all([fetchProtocolDetails(athleteId, competitionParticipationId), fetchExerciseProtocolDetails(competitionParticipationId)]);\n      const protocolScores = protocolData.reduce((acc, detail) => {\n        var _detail$detail;\n        const protocolTypeId = (_detail$detail = detail.detail) === null || _detail$detail === void 0 ? void 0 : _detail$detail.protocolTypeId;\n        if (!acc[protocolTypeId]) {\n          acc[protocolTypeId] = {\n            score: 0,\n            judges: new Set()\n          };\n        }\n        acc[protocolTypeId].score += detail.score;\n        acc[protocolTypeId].judges.add(detail.judgeId);\n        return acc;\n      }, {});\n      const averageScores = Object.values(protocolScores).map(({\n        score,\n        judges\n      }) => score / judges.size);\n      const exerciseScores = exerciseData.filter(item => item.result === 1).length;\n      const totalAverageScore = averageScores.reduce((sum, avg) => sum + avg, 0) + exerciseScores;\n      console.log('Вычисленный общий балл:', totalAverageScore);\n      return totalAverageScore;\n    } catch (error) {\n      console.error('Ошибка при расчете общего балла:', error);\n      return 0;\n    }\n  };\n  const fetchProtocolDetails = async (athleteId, competitionParticipationId) => {\n    try {\n      const response = await api.get(`/api/protocol-result/athlete/${athleteId}/participation/${competitionParticipationId}`);\n      return response.data;\n    } catch (error) {\n      console.error('Ошибка при получении данных протокола:', error);\n      return [];\n    }\n  };\n  const fetchExerciseProtocolDetails = async competitionParticipationId => {\n    try {\n      const response = await api.get(`/api/protocol-exercise-result/participation/${competitionParticipationId}`);\n      return response.data.exercises || [];\n    } catch (error) {\n      console.error('Ошибка при получении данных протокола упражнений:', error);\n      return [];\n    }\n  };\n  const updateParticipantTotalScore = async (participantId, totalScore) => {\n    try {\n      await api.put(`/api/draw-result/update-total-score/${participantId}`, {\n        totalScore\n      });\n      setParticipants(prevParticipants => prevParticipants.map(participant => participant.participation.id === participantId ? {\n        ...participant,\n        totalScore\n      } : participant));\n    } catch (error) {\n      console.error('Ошибка при обновлении общего балла:', error);\n    }\n  };\n  const dayColors = ['#F0F8FF',\n  // Alice Blue\n  '#FAEBD7',\n  // Antique White\n  '#F5F5DC',\n  // Beige\n  '#FFEFD5',\n  // Papaya Whip\n  '#FFF5EE',\n  // SeaShell\n  '#F5F5F5' // White Smoke\n  ];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(ModalVotingDetails, {\n      isOpen: isDetailsModalOpen,\n      onClose: closeDetailsModal,\n      participant: selectedParticipant,\n      onUpdateTotalScore: updateParticipantTotalScore,\n      onUpdateScore: handleUpdateScore\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 4\n    }, this), user && /*#__PURE__*/_jsxDEV(ModalVoting, {\n      isOpen: isVotingModalOpen,\n      onClose: closeVotingModal,\n      participant: selectedParticipant,\n      onSubmit: handleVoteSubmit,\n      judgeId: user.userId // Передаем judgeId в ModalVoting\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 520,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u0416\\u0435\\u0440\\u0435\\u0431\\u043A\\u0443\\u0432\\u0430\\u043D\\u043D\\u044F \\u0441\\u043F\\u043E\\u0440\\u0442\\u0441\\u043C\\u0435\\u043D\\u0456\\u0432\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"select-competition\",\n          value: selectedCompetition,\n          onChange: e => setSelectedCompetition(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"\\u0412\\u0438\\u0431\\u0435\\u0440\\u0456\\u0442\\u044C \\u0437\\u043C\\u0430\\u0433\\u0430\\u043D\\u043D\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 7\n          }, this), competitions.map(competition => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: competition.id,\n            children: competition.title\n          }, competition.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 540,\n            columnNumber: 8\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"edit-button\",\n          onClick: () => {\n            handleDraw(selectedCompetition);\n          },\n          children: \"\\u041F\\u0440\\u043E\\u0432\\u0435\\u0441\\u0442\\u0438 \\u0436\\u0435\\u0440\\u0435\\u0431\\u043A\\u0443\\u0432\\u0430\\u043D\\u043D\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"delete-button\",\n          onClick: () => {\n            deleteAllDrawResultsForCompetition(selectedCompetition);\n          },\n          children: \"\\u0412\\u0438\\u0434\\u0430\\u043B\\u0438\\u0442\\u0438 \\u0436\\u0435\\u0440\\u0435\\u0431\\u043A\\u0443\\u0432\\u0430\\u043D\\u043D\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"trend-container\",\n        children: tabTrends.sort((a, b) => a.localeCompare(b)) // Сортировка строк в алфавитном порядке\n        .map((trend, index) => {\n          var _trendOrder$find;\n          const trendName = trend.split('(')[0].trim();\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"trend-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: trendName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 573,\n              columnNumber: 10\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: ((_trendOrder$find = trendOrder.find(item => item.trend === trendName)) === null || _trendOrder$find === void 0 ? void 0 : _trendOrder$find.position) || '',\n              onChange: e => handleTrendOrderChange(trendName, e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"\\u0412\\u0441\\u0442\\u0430\\u043D\\u043E\\u0432\\u0438\\u0442\\u0438\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 587,\n                columnNumber: 11\n              }, this), Array.from({\n                length: tabTrends.length\n              }, (_, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: i + 1,\n                children: i + 1\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 591,\n                columnNumber: 13\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 10\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 9\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"start-time\",\n              children: \"\\u0427\\u0430\\u0441 \\u043F\\u043E\\u0447\\u0430\\u0442\\u043A\\u0443:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 607,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"start-time\",\n              type: \"time\",\n              value: startTime,\n              onChange: e => setStartTime(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 608,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 606,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"end-time\",\n              children: \"\\u0427\\u0430\\u0441 \\u0437\\u0430\\u043A\\u0456\\u043D\\u0447\\u0435\\u043D\\u043D\\u044F \\u0434\\u043D\\u044F:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 616,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"end-time\",\n              type: \"time\",\n              value: endTime,\n              onChange: e => setEndTime(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 619,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 615,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"performance-duration\",\n              children: \"\\u0422\\u0440\\u0438\\u0432\\u0430\\u043B\\u0456\\u0441\\u0442\\u044C \\u0432\\u0438\\u0441\\u0442\\u0443\\u043F\\u0443 (\\u0445\\u0432):\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 627,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"performance-duration\",\n              type: \"number\",\n              value: performanceDuration,\n              onChange: e => setPerformanceDuration(Number(e.target.value))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 630,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 626,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 605,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"break-duration\",\n              children: \"\\u0422\\u0440\\u0438\\u0432\\u0430\\u043B\\u0456\\u0441\\u0442\\u044C \\u043F\\u0435\\u0440\\u0435\\u0440\\u0432\\u0438 (\\u0445\\u0432):\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 645,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"break-duration\",\n              type: \"number\",\n              value: breakDuration,\n              onChange: e => setBreakDuration(Number(e.target.value))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 648,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 644,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"lunch-start-time\",\n              children: \"\\u041E\\u0431\\u0456\\u0434\\u043D\\u044F \\u043F\\u0435\\u0440\\u0435\\u0440\\u0432\\u0430 \\u043F\\u043E\\u0447\\u0430\\u0442\\u043E\\u043A:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 658,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"lunch-start-time\",\n              type: \"time\",\n              value: lunchBreakStart,\n              onChange: e => setLunchBreakStart(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 661,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 657,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"lunch-end-time\",\n              children: \"\\u041E\\u0431\\u0456\\u0434\\u043D\\u044F \\u043F\\u0435\\u0440\\u0435\\u0440\\u0432\\u0430 \\u043A\\u0456\\u043D\\u0435\\u0446\\u044C:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 671,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"lunch-end-time\",\n              type: \"time\",\n              value: lunchBreakEnd,\n              onChange: e => setLunchBreakEnd(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 674,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 670,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 643,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 604,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"calculate-button\",\n        onClick: calculateTiming,\n        children: \"\\u0420\\u043E\\u0437\\u0440\\u0430\\u0445\\u0443\\u0432\\u0430\\u0442\\u0438 \\u0442\\u0430\\u0439\\u043C\\u0456\\u043D\\u0433\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 686,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 529,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tabs\",\n      children: [tabTrends.map((trend, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-link ${trend === activeTrend ? 'active' : ''}`,\n        onClick: () => handleTabClick(trend),\n        children: trend\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 695,\n        columnNumber: 6\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"tab-link reset-button\",\n        onClick: resetFilter,\n        children: \"\\u0421\\u043A\\u0438\\u043D\\u0443\\u0442\\u0438 \\u0444\\u0456\\u043B\\u044C\\u0442\\u0440\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 704,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 693,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"update-all-scores-button\",\n      onClick: handleUpdateAllScores,\n      children: \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u041E\\u0431\\u0449\\u0438\\u0439 \\u0411\\u0430\\u043B\\u043B \\u0434\\u043B\\u044F \\u0432\\u0441\\u0435\\u0445\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 711,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tab-content-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-container\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u2116\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 722,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0414\\u0435\\u043D\\u044C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 723,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0422\\u0430\\u0439\\u043C\\u0456\\u043D\\u0433\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 724,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0406\\u043C`\\u044F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 725,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0420\\u043E\\u0437\\u0440\\u044F\\u0434\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 726,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0412\\u0456\\u043A\\u043E\\u0432\\u0430 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u044F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 727,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0417\\u0430\\u0433. \\u0431\\u0430\\u043B\\u043B\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 728,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u041F\\u0440\\u043E\\u0442\\u043E\\u043A\\u043E\\u043B\\u0438\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 729,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0414\\u0456\\u044F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 730,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 721,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 720,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: participants.map((participant, index) => {\n              var _participant$particip3, _participant$particip4, _participant$particip5;\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                style: {\n                  backgroundColor: dayColors[(participant.competitionDay - 1) % dayColors.length]\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: participant.performanceOrder\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 745,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [participant.competitionDay, \" \\u0434\\u0435\\u043D\\u044C\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 746,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: participant.timing\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 747,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: `${(_participant$particip3 = participant.participation.Athlete) === null || _participant$particip3 === void 0 ? void 0 : _participant$particip3.firstName} ${(_participant$particip4 = participant.participation.Athlete) === null || _participant$particip4 === void 0 ? void 0 : _participant$particip4.lastName}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 748,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: (_participant$particip5 = participant.participation.Level) === null || _participant$particip5 === void 0 ? void 0 : _participant$particip5.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 749,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: participant.participation.AthleteAge.age\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 752,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [participant.totalScore, ' ']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 758,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: participant.protocolStatuses && participant.protocolStatuses.map(status => /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"protocol-status\",\n                    children: status.isFilled ? '❌' : '✔️'\n                  }, status.protocolTypeId, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 766,\n                    columnNumber: 14\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 762,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"detail-button\",\n                    onClick: () => openDetailsModal(participant),\n                    children: \"\\u0414\\u0435\\u0442\\u0430\\u043B\\u0438\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 779,\n                    columnNumber: 11\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"voting-button\",\n                    onClick: () => openVotingModal(participant),\n                    children: \"\\u0413\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 786,\n                    columnNumber: 11\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 778,\n                  columnNumber: 10\n                }, this)]\n              }, participant.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 735,\n                columnNumber: 9\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 733,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 719,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 718,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 717,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 510,\n    columnNumber: 3\n  }, this);\n};\n_s(AthletesDraw, \"NYg6ERiFp+m8Lln1HyJXTGymRBg=\");\n_c = AthletesDraw;\nexport default AthletesDraw;\nvar _c;\n$RefreshReg$(_c, \"AthletesDraw\");","map":{"version":3,"names":["React","useState","useEffect","useContext","api","ModalVotingDetails","ModalVoting","AuthContext","jsxDEV","_jsxDEV","AthletesDraw","_s","participants","setParticipants","competitions","setCompetitions","tabTrends","setTabTrends","allParticipants","setAllParticipants","trendOrder","setTrendOrder","selectedCompetition","setSelectedCompetition","activeTrend","setActiveTrend","startTime","setStartTime","performanceDuration","setPerformanceDuration","breakDuration","setBreakDuration","lunchBreakStart","setLunchBreakStart","lunchBreakEnd","setLunchBreakEnd","endTime","setEndTime","isDetailsModalOpen","setIsDetailsModalOpen","isVotingModalOpen","setIsVotingModalOpen","selectedParticipant","setSelectedParticipant","user","fetchData","fetchDataTabs","openDetailsModal","participant","closeDetailsModal","openVotingModal","closeVotingModal","fetchProtocolStatuses","athleteId","competitionParticipationId","console","error","response","get","data","length","uniqueProtocolResults","Array","from","Set","map","result","protocolTypeId","find","isFilled","status","responseDraw","sortedData","sort","a","b","performanceOrder","updatedParticipants","Promise","all","protocolStatuses","participation","totalScore","calculateTotalScore","id","responseCompetition","uniqueTrends","forEach","item","AthleteTrend","trends","trendName","split","trim","add","responseParticipants","handleDraw","alert","newDrawResponse","post","drawResults","sortedParticipants","_item$participation","_item$participation$A","handleTrendOrderChange","trend","position","orderCopy","filter","push","parseInt","filterParticipantsByTrendOrder","order","orderedTrends","filteredParticipants","_participant$particip","_participant$particip2","includes","trendA","trendB","positionA","indexOf","positionB","handleTabClick","selectedTrend","startsWith","sortedFilteredParticipants","resetFilter","calculateTiming","currentTime","Date","endTimeOfDay","lunchStartTime","lunchEndTime","currentDay","timeStr","toISOString","substring","dayStr","getTime","timing","competitionDay","log","put","transformedData","results","deleteAllDrawResultsForCompetition","competitionId","delete","message","handleVoteSubmit","e","preventDefault","formData","Athlete","score","target","value","comment","handleUpdateScore","participantId","newTotalScore","prevParticipants","handleUpdateAllScores","protocolData","exerciseData","fetchProtocolDetails","fetchExerciseProtocolDetails","protocolScores","reduce","acc","detail","_detail$detail","judges","judgeId","averageScores","Object","values","size","exerciseScores","totalAverageScore","sum","avg","exercises","updateParticipantTotalScore","dayColors","children","isOpen","onClose","onUpdateTotalScore","onUpdateScore","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","userId","className","onChange","competition","title","onClick","localeCompare","index","_trendOrder$find","_","i","htmlFor","type","Number","_participant$particip3","_participant$particip4","_participant$particip5","style","backgroundColor","firstName","lastName","Level","name","AthleteAge","age","_c","$RefreshReg$"],"sources":["/Users/igorfedianin/MyProject/poleeducation.in.ua/frontend/src/components/adminpanel/AthletesDraw.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport api from '../../api/api';\nimport ModalVotingDetails from '../ModalVotingDetails';\nimport ModalVoting from '../ModalVoting';\nimport './AthletesDraw.css';\nimport { AuthContext } from '../../context/AuthContext';\n\nconst AthletesDraw = () => {\n\tconst [participants, setParticipants] = useState([]);\n\tconst [competitions, setCompetitions] = useState([]);\n\tconst [tabTrends, setTabTrends] = useState([]);\n\tconst [allParticipants, setAllParticipants] = useState([]);\n\tconst [trendOrder, setTrendOrder] = useState([]);\n\tconst [selectedCompetition, setSelectedCompetition] = useState('');\n\tconst [activeTrend, setActiveTrend] = useState('');\n\tconst [startTime, setStartTime] = useState('09:00');\n\tconst [performanceDuration, setPerformanceDuration] = useState(5); // в минутах\n\tconst [breakDuration, setBreakDuration] = useState(1); // в минутах\n\tconst [lunchBreakStart, setLunchBreakStart] = useState('12:00');\n\tconst [lunchBreakEnd, setLunchBreakEnd] = useState('13:00');\n\tconst [endTime, setEndTime] = useState('19:00'); // Например, соревнования заканчиваются в 18:00\n\tconst [isDetailsModalOpen, setIsDetailsModalOpen] = useState(false);\n\tconst [isVotingModalOpen, setIsVotingModalOpen] = useState(false);\n\tconst [selectedParticipant, setSelectedParticipant] = useState(null);\n\tconst { user } = useContext(AuthContext); // Получаем пользователя из контекста\n\n\tuseEffect(() => {\n\t\tfetchData();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (selectedCompetition) {\n\t\t\tfetchDataTabs();\n\t\t}\n\t}, [selectedCompetition]);\n\n\tconst openDetailsModal = (participant) => {\n\t\tsetSelectedParticipant(participant);\n\t\tsetIsDetailsModalOpen(true);\n\t};\n\n\tconst closeDetailsModal = () => {\n\t\tsetIsDetailsModalOpen(false);\n\t};\n\n\tconst openVotingModal = (participant) => {\n\t\tsetSelectedParticipant(participant);\n\t\tsetIsVotingModalOpen(true);\n\t};\n\n\tconst closeVotingModal = () => {\n\t\tsetIsVotingModalOpen(false);\n\t};\n\n\tconst fetchProtocolStatuses = async (participant) => {\n\t\tconst { athleteId, competitionParticipationId } = participant;\n\n\t\tif (!athleteId || !competitionParticipationId) {\n\t\t\tconsole.error('Missing athleteId or competitionParticipationId');\n\t\t\treturn [];\n\t\t}\n\n\t\ttry {\n\t\t\tconst response = await api.get(\n\t\t\t\t`/api/protocol-result/athlete/${athleteId}/participation/${competitionParticipationId}`\n\t\t\t);\n\n\t\t\tif (response.data && response.data.length > 0) {\n\t\t\t\tconst uniqueProtocolResults = Array.from(\n\t\t\t\t\tnew Set(\n\t\t\t\t\t\tresponse.data.map((result) => result.protocolTypeId)\n\t\t\t\t\t)\n\t\t\t\t).map((protocolTypeId) => {\n\t\t\t\t\treturn response.data.find(\n\t\t\t\t\t\t(result) => result.protocolTypeId === protocolTypeId\n\t\t\t\t\t);\n\t\t\t\t});\n\n\t\t\t\treturn uniqueProtocolResults.map((result) => ({\n\t\t\t\t\tprotocolTypeId: result.protocolTypeId,\n\t\t\t\t\tisFilled: result.isFilled,\n\t\t\t\t}));\n\t\t\t} else {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tif (error.response && error.response.status === 404) {\n\t\t\t\treturn [];\n\t\t\t} else {\n\t\t\t\tconsole.error('Error fetching protocol statuses:', error);\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\t};\n\n\tconst fetchData = async () => {\n\t\ttry {\n\t\t\tconst responseDraw = await api.get('/api/draw-result');\n\t\t\tconst sortedData = responseDraw.data.sort(\n\t\t\t\t(a, b) => a.performanceOrder - b.performanceOrder\n\t\t\t);\n\n\t\t\tconst updatedParticipants = await Promise.all(\n\t\t\t\tsortedData.map(async (participant) => {\n\t\t\t\t\tconst protocolStatuses = await fetchProtocolStatuses({\n\t\t\t\t\t\tathleteId: participant.participation.athleteId,\n\t\t\t\t\t\tcompetitionParticipationId:\n\t\t\t\t\t\t\tparticipant.competitionParticipationId,\n\t\t\t\t\t});\n\t\t\t\t\tconst totalScore = await calculateTotalScore(\n\t\t\t\t\t\tparticipant.participation.athleteId,\n\t\t\t\t\t\tparticipant.participation.id\n\t\t\t\t\t);\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...participant,\n\t\t\t\t\t\tprotocolStatuses,\n\t\t\t\t\t\ttotalScore,\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tsetAllParticipants(updatedParticipants); // Сохраняем всех участников, отсортированных\n\t\t\tsetParticipants(updatedParticipants); // Обновляем текущее состояние участников\n\n\t\t\tconst responseCompetition = await api.get('/api/competition');\n\t\t\tsetCompetitions(responseCompetition.data);\n\n\t\t\t// Извлекаем уникальные направления\n\t\t\tconst uniqueTrends = new Set();\n\t\t\tresponseDraw.data.forEach((item) => {\n\t\t\t\tif (\n\t\t\t\t\titem.participation &&\n\t\t\t\t\titem.participation.AthleteTrend &&\n\t\t\t\t\titem.participation.AthleteTrend.trends\n\t\t\t\t) {\n\t\t\t\t\tconst trendName = item.participation.AthleteTrend.trends\n\t\t\t\t\t\t.split('(')[0]\n\t\t\t\t\t\t.trim(); // Отсекаем по скобке и обрезаем пробелы\n\t\t\t\t\tuniqueTrends.add(trendName);\n\t\t\t\t}\n\t\t\t});\n\t\t\tsetTabTrends(Array.from(uniqueTrends)); // Преобразуем Set в массив и сохраняем в состояние\n\t\t} catch (error) {\n\t\t\tconsole.error('Ошибка при получении данных:', error);\n\t\t}\n\t};\n\n\tconst fetchDataTabs = async () => {\n\t\tif (!selectedCompetition) {\n\t\t\tconsole.error('Соревнование не выбрано');\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst responseParticipants = await api.get(\n\t\t\t\t`/api/comp-part/trends/${selectedCompetition}`\n\t\t\t);\n\t\t\tconst uniqueTrends = new Set();\n\t\t\tresponseParticipants.data.forEach((item) => {\n\t\t\t\tconst trendName = item.AthleteTrend.trends.split('(')[0].trim(); // Отсекаем по скобке и обрезаем пробелы\n\t\t\t\tuniqueTrends.add(trendName);\n\t\t\t});\n\t\t\tsetTabTrends(Array.from(uniqueTrends));\n\t\t} catch (error) {\n\t\t\tconsole.error('Ошибка при получении данных о направлениях:', error);\n\t\t}\n\t};\n\n\tconst handleDraw = async () => {\n\t\tif (!selectedCompetition) {\n\t\t\talert('Пожалуйста, выберите соревнование.');\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst newDrawResponse = await api.post(\n\t\t\t\t`/api/draw-result/draw/${selectedCompetition}`\n\t\t\t);\n\n\t\t\tif (newDrawResponse.data && newDrawResponse.data.drawResults) {\n\t\t\t\tconst participants = newDrawResponse.data.drawResults.map(\n\t\t\t\t\t(result) => ({\n\t\t\t\t\t\t...result,\n\t\t\t\t\t\tparticipation: result.participation,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tconst sortedParticipants = participants.sort(\n\t\t\t\t\t(a, b) => a.performanceOrder - b.performanceOrder\n\t\t\t\t);\n\n\t\t\t\tsetAllParticipants(sortedParticipants); // Обновляем всех участников\n\t\t\t\tsetParticipants(sortedParticipants); // Обновляем текущих участников\n\n\t\t\t\tconst trends = Array.from(\n\t\t\t\t\tnew Set(\n\t\t\t\t\t\tparticipants.map((item) =>\n\t\t\t\t\t\t\titem.participation?.AthleteTrend?.trends\n\t\t\t\t\t\t\t\t.split('(')[0]\n\t\t\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\tsetTabTrends(trends); // Обновляем направления без скобок\n\t\t\t} else {\n\t\t\t\tconsole.error('Expected participants data is not available');\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Ошибка при проведении жеребьёвки:', error);\n\t\t}\n\t};\n\n\t// Функция для изменения порядка направлений\n\tconst handleTrendOrderChange = (trend, position) => {\n\t\tlet orderCopy = [...trendOrder];\n\t\torderCopy = orderCopy.filter((item) => item.trend !== trend); // Убираем текущее направление, если оно уже есть\n\t\torderCopy.push({ trend, position: parseInt(position) }); // Добавляем направление с новой позицией\n\t\torderCopy.sort((a, b) => a.position - b.position); // Сортируем по позиции\n\t\tsetTrendOrder(orderCopy);\n\t\tfilterParticipantsByTrendOrder(orderCopy); // Фильтрация участников по новому порядку\n\t};\n\n\t// Функция для фильтрации и сортировки участников по выбранному порядку направлений\n\tconst filterParticipantsByTrendOrder = (order) => {\n\t\tconst orderedTrends = order.map((item) => item.trend);\n\t\tconst filteredParticipants = allParticipants\n\t\t\t.filter((participant) =>\n\t\t\t\torderedTrends.includes(\n\t\t\t\t\tparticipant.participation?.AthleteTrend?.trends\n\t\t\t\t\t\t.split('(')[0]\n\t\t\t\t\t\t.trim()\n\t\t\t\t)\n\t\t\t)\n\t\t\t.sort((a, b) => {\n\t\t\t\tconst trendA = a.participation.AthleteTrend.trends\n\t\t\t\t\t.split('(')[0]\n\t\t\t\t\t.trim();\n\t\t\t\tconst trendB = b.participation.AthleteTrend.trends\n\t\t\t\t\t.split('(')[0]\n\t\t\t\t\t.trim();\n\t\t\t\tconst positionA = orderedTrends.indexOf(trendA);\n\t\t\t\tconst positionB = orderedTrends.indexOf(trendB);\n\t\t\t\treturn positionA - positionB;\n\t\t\t});\n\t\tsetParticipants(filteredParticipants);\n\t};\n\n\tconst handleTabClick = (selectedTrend) => {\n\t\tsetActiveTrend(selectedTrend);\n\t\t// Фильтрация участников по направлению\n\t\tconst filteredParticipants = allParticipants.filter(\n\t\t\t(participant) =>\n\t\t\t\tparticipant.participation &&\n\t\t\t\tparticipant.participation.AthleteTrend &&\n\t\t\t\tparticipant.participation.AthleteTrend.trends.startsWith(\n\t\t\t\t\tselectedTrend\n\t\t\t\t)\n\t\t);\n\t\t// Сортировка отфильтрованных участников\n\t\tconst sortedFilteredParticipants = filteredParticipants.sort(\n\t\t\t(a, b) => a.performanceOrder - b.performanceOrder\n\t\t);\n\t\tsetParticipants(sortedFilteredParticipants); // Обновляем список участников жеребьёвки для отображения\n\t};\n\n\tconst resetFilter = () => {\n\t\tsetActiveTrend(''); // Сброс активного направления\n\t\tsetParticipants(allParticipants); // Восстановление списка всех участников\n\t};\n\n\tconst calculateTiming = async () => {\n\t\tif (!selectedCompetition) {\n\t\t\talert('Please select a competition before calculating timings.');\n\t\t\treturn;\n\t\t}\n\n\t\tlet currentTime = new Date(`2024-01-01T${startTime}:00Z`);\n\t\tconst endTimeOfDay = new Date(`2024-01-01T${endTime}:00Z`);\n\t\tconst lunchStartTime = new Date(`2024-01-01T${lunchBreakStart}:00Z`);\n\t\tconst lunchEndTime = new Date(`2024-01-01T${lunchBreakEnd}:00Z`);\n\n\t\tlet currentDay = 1; // Начинаем с первого дня\n\n\t\tconst updatedParticipants = participants.map((participant) => {\n\t\t\t// Обработка обеденного перерыва\n\t\t\tif (currentTime >= lunchStartTime && currentTime < lunchEndTime) {\n\t\t\t\tcurrentTime = new Date(lunchEndTime);\n\t\t\t}\n\t\t\t// Обработка окончания дня\n\t\t\tif (currentTime >= endTimeOfDay) {\n\t\t\t\tcurrentTime = new Date(`2024-01-01T${startTime}:00Z`);\n\t\t\t\tcurrentDay++; // Переход на следующий день\n\t\t\t}\n\n\t\t\tconst timeStr = currentTime.toISOString().substring(11, 16);\n\t\t\tconst dayStr = currentDay; // Отображение текущего дня\n\n\t\t\tcurrentTime = new Date(\n\t\t\t\tcurrentTime.getTime() +\n\t\t\t\t\t(performanceDuration + breakDuration) * 60000\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\t...participant,\n\t\t\t\ttiming: timeStr,\n\t\t\t\tcompetitionDay: dayStr,\n\t\t\t};\n\t\t});\n\n\t\tsetParticipants(updatedParticipants);\n\t\tconsole.log('Calculated timings:', updatedParticipants);\n\n\t\t// Обновление времени на сервере\n\t\ttry {\n\t\t\tconst response = await api.put(\n\t\t\t\t`/api/draw-result/update-timing/${selectedCompetition}`,\n\t\t\t\tupdatedParticipants\n\t\t\t);\n\t\t\tif (response.status === 200) {\n\t\t\t\tconsole.log('Timings successfully updated:', response.data);\n\t\t\t\tconst transformedData = response.data.results.map(\n\t\t\t\t\t(item) => item[0]\n\t\t\t\t);\n\t\t\t\tsetParticipants(transformedData);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Error updating timings:', error);\n\t\t}\n\t};\n\n\tconst deleteAllDrawResultsForCompetition = async (competitionId) => {\n\t\ttry {\n\t\t\tconst response = await api.delete(\n\t\t\t\t`/api/draw-result/delete/${competitionId}`\n\t\t\t);\n\t\t\tconsole.log(response.data.message); // Логирование сообщения об успешном удалении\n\n\t\t\t// Обновление состояния для удаления всех результатов жеребьёвки данного соревнования\n\t\t\tconst updatedParticipants = allParticipants.filter(\n\t\t\t\t(participant) => participant.competitionId !== competitionId\n\t\t\t);\n\t\t\tsetParticipants(updatedParticipants);\n\t\t\tsetAllParticipants(updatedParticipants); // Обновляем состояние всех участников\n\t\t} catch (error) {\n\t\t\tconsole.error('Ошибка при удалении результатов жеребьёвки:', error);\n\t\t\talert('Не удалось удалить результаты жеребьёвки: ' + error.message);\n\t\t}\n\t};\n\n\tconst handleVoteSubmit = async (e) => {\n\t\te.preventDefault(); // Предотвращаем стандартное поведение формы\n\n\t\t// Собираем данные из формы\n\t\tconst formData = {\n\t\t\tathleteId: selectedParticipant.participation.Athlete.id,\n\t\t\tscore: e.target.score.value, // Предполагаем, что у поля ввода оценки есть имя 'score'\n\t\t\tcomment: e.target.comment.value, // Предполагаем, что у текстового поля комментария есть имя 'comment'\n\t\t};\n\n\t\ttry {\n\t\t\t// Отправляем данные на сервер\n\t\t\tconst response = await api.post('/api/voting', formData);\n\t\t\tif (response.status === 200) {\n\t\t\t\tconsole.log('Голос успешно зарегистрирован');\n\t\t\t\t// Здесь можно добавить дальнейшие действия, например, закрыть модальное окно\n\t\t\t\tcloseVotingModal();\n\t\t\t} else {\n\t\t\t\tconsole.error('Ошибка при отправке данных', response);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Ошибка при отправке данных', error);\n\t\t}\n\t};\n\n\tconst handleUpdateScore = (participantId, newTotalScore) => {\n\t\tsetParticipants((prevParticipants) =>\n\t\t\tprevParticipants.map((participant) =>\n\t\t\t\tparticipant.id === participantId\n\t\t\t\t\t? { ...participant, totalScore: newTotalScore }\n\t\t\t\t\t: participant\n\t\t\t)\n\t\t);\n\t};\n\n\tconst handleUpdateAllScores = async () => {\n\t\ttry {\n\t\t\tconst updatedParticipants = await Promise.all(\n\t\t\t\tparticipants.map(async (participant) => {\n\t\t\t\t\tconst totalScore = await calculateTotalScore(\n\t\t\t\t\t\tparticipant.participation.athleteId,\n\t\t\t\t\t\tparticipant.participation.id\n\t\t\t\t\t);\n\t\t\t\t\tawait api.put(\n\t\t\t\t\t\t`/api/draw-result/update-total-score/${participant.id}`,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttotalScore,\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\treturn { ...participant, totalScore };\n\t\t\t\t})\n\t\t\t);\n\t\t\tsetParticipants(updatedParticipants);\n\t\t} catch (error) {\n\t\t\tconsole.error(\n\t\t\t\t'Ошибка при обновлении totalScore для всех участников:',\n\t\t\t\terror\n\t\t\t);\n\t\t}\n\t};\n\n\tconst calculateTotalScore = async (\n\t\tathleteId,\n\t\tcompetitionParticipationId\n\t) => {\n\t\ttry {\n\t\t\tconst [protocolData, exerciseData] = await Promise.all([\n\t\t\t\tfetchProtocolDetails(athleteId, competitionParticipationId),\n\t\t\t\tfetchExerciseProtocolDetails(competitionParticipationId),\n\t\t\t]);\n\n\t\t\tconst protocolScores = protocolData.reduce((acc, detail) => {\n\t\t\t\tconst protocolTypeId = detail.detail?.protocolTypeId;\n\t\t\t\tif (!acc[protocolTypeId]) {\n\t\t\t\t\tacc[protocolTypeId] = { score: 0, judges: new Set() };\n\t\t\t\t}\n\t\t\t\tacc[protocolTypeId].score += detail.score;\n\t\t\t\tacc[protocolTypeId].judges.add(detail.judgeId);\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\n\t\t\tconst averageScores = Object.values(protocolScores).map(\n\t\t\t\t({ score, judges }) => score / judges.size\n\t\t\t);\n\n\t\t\tconst exerciseScores = exerciseData.filter(\n\t\t\t\t(item) => item.result === 1\n\t\t\t).length;\n\n\t\t\tconst totalAverageScore =\n\t\t\t\taverageScores.reduce((sum, avg) => sum + avg, 0) +\n\t\t\t\texerciseScores;\n\n\t\t\tconsole.log('Вычисленный общий балл:', totalAverageScore);\n\t\t\treturn totalAverageScore;\n\t\t} catch (error) {\n\t\t\tconsole.error('Ошибка при расчете общего балла:', error);\n\t\t\treturn 0;\n\t\t}\n\t};\n\n\tconst fetchProtocolDetails = async (\n\t\tathleteId,\n\t\tcompetitionParticipationId\n\t) => {\n\t\ttry {\n\t\t\tconst response = await api.get(\n\t\t\t\t`/api/protocol-result/athlete/${athleteId}/participation/${competitionParticipationId}`\n\t\t\t);\n\t\t\treturn response.data;\n\t\t} catch (error) {\n\t\t\tconsole.error('Ошибка при получении данных протокола:', error);\n\t\t\treturn [];\n\t\t}\n\t};\n\n\tconst fetchExerciseProtocolDetails = async (competitionParticipationId) => {\n\t\ttry {\n\t\t\tconst response = await api.get(\n\t\t\t\t`/api/protocol-exercise-result/participation/${competitionParticipationId}`\n\t\t\t);\n\t\t\treturn response.data.exercises || [];\n\t\t} catch (error) {\n\t\t\tconsole.error(\n\t\t\t\t'Ошибка при получении данных протокола упражнений:',\n\t\t\t\terror\n\t\t\t);\n\t\t\treturn [];\n\t\t}\n\t};\n\n\tconst updateParticipantTotalScore = async (participantId, totalScore) => {\n\t\ttry {\n\t\t\tawait api.put(\n\t\t\t\t`/api/draw-result/update-total-score/${participantId}`,\n\t\t\t\t{\n\t\t\t\t\ttotalScore,\n\t\t\t\t}\n\t\t\t);\n\t\t\tsetParticipants((prevParticipants) =>\n\t\t\t\tprevParticipants.map((participant) =>\n\t\t\t\t\tparticipant.participation.id === participantId\n\t\t\t\t\t\t? { ...participant, totalScore }\n\t\t\t\t\t\t: participant\n\t\t\t\t)\n\t\t\t);\n\t\t} catch (error) {\n\t\t\tconsole.error('Ошибка при обновлении общего балла:', error);\n\t\t}\n\t};\n\n\tconst dayColors = [\n\t\t'#F0F8FF', // Alice Blue\n\t\t'#FAEBD7', // Antique White\n\t\t'#F5F5DC', // Beige\n\t\t'#FFEFD5', // Papaya Whip\n\t\t'#FFF5EE', // SeaShell\n\t\t'#F5F5F5', // White Smoke\n\t];\n\n\treturn (\n\t\t<div>\n\t\t\t<ModalVotingDetails\n\t\t\t\tisOpen={isDetailsModalOpen}\n\t\t\t\tonClose={closeDetailsModal}\n\t\t\t\tparticipant={selectedParticipant}\n\t\t\t\tonUpdateTotalScore={updateParticipantTotalScore}\n\t\t\t\tonUpdateScore={handleUpdateScore}\n\t\t\t/>\n\n\t\t\t{user && (\n\t\t\t\t<ModalVoting\n\t\t\t\t\tisOpen={isVotingModalOpen}\n\t\t\t\t\tonClose={closeVotingModal}\n\t\t\t\t\tparticipant={selectedParticipant}\n\t\t\t\t\tonSubmit={handleVoteSubmit}\n\t\t\t\t\tjudgeId={user.userId} // Передаем judgeId в ModalVoting\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t<div className='container'>\n\t\t\t\t<h1>Жеребкування спортсменів</h1>\n\t\t\t\t<div className='form-group'>\n\t\t\t\t\t<select\n\t\t\t\t\t\tclassName='select-competition'\n\t\t\t\t\t\tvalue={selectedCompetition}\n\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\tsetSelectedCompetition(e.target.value)\n\t\t\t\t\t\t}>\n\t\t\t\t\t\t<option value=''>Виберіть змагання</option>\n\t\t\t\t\t\t{competitions.map((competition) => (\n\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\tkey={competition.id}\n\t\t\t\t\t\t\t\tvalue={competition.id}>\n\t\t\t\t\t\t\t\t{competition.title}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</select>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName='edit-button'\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\thandleDraw(selectedCompetition);\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tПровести жеребкування\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName='delete-button'\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tdeleteAllDrawResultsForCompetition(\n\t\t\t\t\t\t\t\tselectedCompetition\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\tВидалити жеребкування\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div className='trend-container'>\n\t\t\t\t\t{tabTrends\n\t\t\t\t\t\t.sort((a, b) => a.localeCompare(b)) // Сортировка строк в алфавитном порядке\n\t\t\t\t\t\t.map((trend, index) => {\n\t\t\t\t\t\t\tconst trendName = trend.split('(')[0].trim();\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName='trend-item'\n\t\t\t\t\t\t\t\t\tkey={index}>\n\t\t\t\t\t\t\t\t\t<label>{trendName}</label>\n\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\t\t\t\ttrendOrder.find(\n\t\t\t\t\t\t\t\t\t\t\t\t(item) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\titem.trend === trendName\n\t\t\t\t\t\t\t\t\t\t\t)?.position || ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\thandleTrendOrderChange(\n\t\t\t\t\t\t\t\t\t\t\t\ttrendName,\n\t\t\t\t\t\t\t\t\t\t\t\te.target.value\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\t\t\t<option value=''>Встановити</option>\n\t\t\t\t\t\t\t\t\t\t{Array.from(\n\t\t\t\t\t\t\t\t\t\t\t{ length: tabTrends.length },\n\t\t\t\t\t\t\t\t\t\t\t(_, i) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={i + 1}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{i + 1}\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t</div>\n\n\t\t\t\t<div className='form-group'>\n\t\t\t\t\t<div className='row'>\n\t\t\t\t\t\t<div className='col'>\n\t\t\t\t\t\t\t<label htmlFor='start-time'>Час початку:</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid='start-time'\n\t\t\t\t\t\t\t\ttype='time'\n\t\t\t\t\t\t\t\tvalue={startTime}\n\t\t\t\t\t\t\t\tonChange={(e) => setStartTime(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col'>\n\t\t\t\t\t\t\t<label htmlFor='end-time'>\n\t\t\t\t\t\t\t\tЧас закінчення дня:\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid='end-time'\n\t\t\t\t\t\t\t\ttype='time'\n\t\t\t\t\t\t\t\tvalue={endTime}\n\t\t\t\t\t\t\t\tonChange={(e) => setEndTime(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col'>\n\t\t\t\t\t\t\t<label htmlFor='performance-duration'>\n\t\t\t\t\t\t\t\tТривалість виступу (хв):\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid='performance-duration'\n\t\t\t\t\t\t\t\ttype='number'\n\t\t\t\t\t\t\t\tvalue={performanceDuration}\n\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\tsetPerformanceDuration(\n\t\t\t\t\t\t\t\t\t\tNumber(e.target.value)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className='row'>\n\t\t\t\t\t\t<div className='col'>\n\t\t\t\t\t\t\t<label htmlFor='break-duration'>\n\t\t\t\t\t\t\t\tТривалість перерви (хв):\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid='break-duration'\n\t\t\t\t\t\t\t\ttype='number'\n\t\t\t\t\t\t\t\tvalue={breakDuration}\n\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\tsetBreakDuration(Number(e.target.value))\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col'>\n\t\t\t\t\t\t\t<label htmlFor='lunch-start-time'>\n\t\t\t\t\t\t\t\tОбідня перерва початок:\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid='lunch-start-time'\n\t\t\t\t\t\t\t\ttype='time'\n\t\t\t\t\t\t\t\tvalue={lunchBreakStart}\n\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\tsetLunchBreakStart(e.target.value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col'>\n\t\t\t\t\t\t\t<label htmlFor='lunch-end-time'>\n\t\t\t\t\t\t\t\tОбідня перерва кінець:\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid='lunch-end-time'\n\t\t\t\t\t\t\t\ttype='time'\n\t\t\t\t\t\t\t\tvalue={lunchBreakEnd}\n\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\tsetLunchBreakEnd(e.target.value)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<button\n\t\t\t\t\tclassName='calculate-button'\n\t\t\t\t\tonClick={calculateTiming}>\n\t\t\t\t\tРозрахувати таймінг\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div className='tabs'>\n\t\t\t\t{tabTrends.map((trend, index) => (\n\t\t\t\t\t<button\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tclassName={`tab-link ${\n\t\t\t\t\t\t\ttrend === activeTrend ? 'active' : ''\n\t\t\t\t\t\t}`}\n\t\t\t\t\t\tonClick={() => handleTabClick(trend)}>\n\t\t\t\t\t\t{trend}\n\t\t\t\t\t</button>\n\t\t\t\t))}\n\t\t\t\t<button\n\t\t\t\t\tclassName='tab-link reset-button'\n\t\t\t\t\tonClick={resetFilter}>\n\t\t\t\t\tСкинути фільтр\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<button\n\t\t\t\tclassName='update-all-scores-button'\n\t\t\t\tonClick={handleUpdateAllScores}>\n\t\t\t\tОбновить Общий Балл для всех\n\t\t\t</button>\n\n\t\t\t<div className='tab-content-container'>\n\t\t\t\t<div className='table-container'>\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>№</th>\n\t\t\t\t\t\t\t\t<th>День</th>\n\t\t\t\t\t\t\t\t<th>Таймінг</th>\n\t\t\t\t\t\t\t\t<th>Ім`я</th>\n\t\t\t\t\t\t\t\t<th>Розряд</th>\n\t\t\t\t\t\t\t\t<th>Вікова категорія</th>\n\t\t\t\t\t\t\t\t<th>Заг. балл</th>\n\t\t\t\t\t\t\t\t<th>Протоколи</th>\n\t\t\t\t\t\t\t\t<th>Дія</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{participants.map((participant, index) => (\n\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\tkey={participant.id}\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tbackgroundColor:\n\t\t\t\t\t\t\t\t\t\t\tdayColors[\n\t\t\t\t\t\t\t\t\t\t\t\t(participant.competitionDay -\n\t\t\t\t\t\t\t\t\t\t\t\t\t1) %\n\t\t\t\t\t\t\t\t\t\t\t\t\tdayColors.length\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t<td>{participant.performanceOrder}</td>\n\t\t\t\t\t\t\t\t\t<td>{participant.competitionDay} день</td>\n\t\t\t\t\t\t\t\t\t<td>{participant.timing}</td>\n\t\t\t\t\t\t\t\t\t<td>{`${participant.participation.Athlete?.firstName} ${participant.participation.Athlete?.lastName}`}</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t{participant.participation.Level?.name}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tparticipant.participation.AthleteAge\n\t\t\t\t\t\t\t\t\t\t\t\t.age\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t{participant.totalScore}{' '}\n\t\t\t\t\t\t\t\t\t\t{/* Отображаем общую сумму баллов */}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t{participant.protocolStatuses &&\n\t\t\t\t\t\t\t\t\t\t\tparticipant.protocolStatuses.map(\n\t\t\t\t\t\t\t\t\t\t\t\t(status) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstatus.protocolTypeId\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='protocol-status'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{status.isFilled\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? '❌'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: '✔️'}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName='detail-button'\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\topenDetailsModal(participant)\n\t\t\t\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\t\t\t\tДетали\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName='voting-button'\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\topenVotingModal(participant)\n\t\t\t\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\t\t\t\tГолосование\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AthletesDraw;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}